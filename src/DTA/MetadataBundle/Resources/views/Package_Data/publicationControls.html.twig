{# 
    This template displays an overview of the publications data. It is displayed when the user clicks on a publication in the special list view (views/listViewWithOptions.html.twig). 
    The data is retrieved via ajax using the publicationControlsAction of the Data Domain controller.
#}

{# --------------- Basisinformationen --------------- #}

<!-- this is generated by the publicationControls.html.twig template and the data is provided by the DataDomainController class. -->
<table>
  <thead>
    <tr>
      <th colspan="2" >{{publication.getShortTitle}}</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Autor</td>
      <td>{{publication.getFirstAuthorName}}</td>
    </tr>
    {% if publication.getDatespecificationRelatedByCreationdateId is not null %}
    <tr>
      <td>Entstanden</td>
      <td>{{publication.getDatespecificationRelatedByCreationdateId}}</td>
    </tr>
    {% endif %}
    <tr>
      <td>Veröffentlicht</td>
      <td>{{publication.getDatespecificationRelatedByPublicationdateId}}</td>
    </tr>
    {% if publication.getType == "VOLUME" %}
    {% set volume = publication.getSpecialization %}
    <tr>
      <td>Band</td>
      <td>
        
        {% if volume.publication.hasPrevSibling %} 
            <a data="{{volume.publication.getPrevSibling.id}}" href="#" onclick="recordClicked.call(this);">
                <img class="arrow-icon" src="{{asset('img/glyphicons_210_left_arrow.png')}}"/>
            </a>
        {% endif %}

        {{ volume.volumeNumeric }} von {{volume.numberOfRealVolumes}}
          
        {% if volume.publication.hasNextSibling %}
            <a data="{{volume.publication.getNextSibling.id}}" href="#" onclick="recordClicked.call(this);">
                <img class="arrow-icon" src="{{asset('img/glyphicons_211_right_arrow.png')}}"/>
            </a>
        {% endif %} 
        <br/>
{#        Zeige alle Bände#}
        
      </td>
    </tr>
    {% endif %}
  </tbody>
</table>

{# --------------- Vollanzeige/Bearbeiten --------------- #}

<div style="margin-top:10px">
{#<a href="#" class="btn btn-default disabled btn-sm">Vollanzeige</a> #}
<a href="{{path('Data_genericCreateOrEdit', {'className':publication.getSpecializationClassName ,'recordId':publication.id})}}" class="btn btn-default btn-sm">Editieren</a> 
</div>

{# --------------- Tasks --------------- #}

{% if publication.getTasksByClosed(false)|length > 0 %}
    <h4>Offene Tasks</h4>
    {% include 'DTAMetadataBundle:Package_Workflow:taskListForPublication.html.twig' with {'tasks': publication.getTasksByClosed(false)} %}
{% endif %}

{% if publication.getTasksByClosed(true)|length > 0 %}
    <h4>Geschlossene Tasks</h4>
    {% include 'DTAMetadataBundle:Package_Workflow:taskListForPublication.html.twig' with {'tasks': publication.getTasksByClosed(true)} %}
{% endif %}

{# old format: CoordinateMerge_Don	12.03.2010	12.03.2010 #}

{# --------------- Fundstellen --------------- #}
    
{% set copyLocations = publication.getCopyLocations %}
{% if copyLocations|length > 0 %}
<h4>Nachweise</h4>
{% for copyLocation in copyLocations %}
    {% set tagImageUrl = copyLocation.available ? asset('img/tag_green.png') : asset('img/tag_red.png') %}
    {% set editCopyLocationURL = path('Workflow_genericCreateOrEdit', {'className':'CopyLocation','recordId':copyLocation.id}) %}
    <img src="{{tagImageUrl}}"/> 
    <a href="{{editCopyLocationURL}}">
        {{ copyLocation.partner is null ? copyLocation.CatalogueSignature : copyLocation.partner }} 
    </a><br/>
{% endfor %}
{% endif %}
Zeige Übersicht