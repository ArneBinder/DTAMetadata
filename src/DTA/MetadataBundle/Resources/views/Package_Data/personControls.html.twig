{# 
    This template displays an overview of the person data. It is displayed when the user clicks on a person in the special list view (views/listViewWithOptions.html.twig).
    The data is retrieved via ajax using the controlsAction of the Data Domain controller.
#}

{# --------------- Basisinformationen --------------- #}

<!-- this is generated by the personControls.html.twig template and the data is provided by the DataDomainController class. -->
<table>
  <thead>
    <tr>
      <th colspan="2" title="Person-ID: {{person.id}}">{{person.getRepresentativePersonalname}}</th>
    </tr>
  </thead>
  <tbody>
    {% if(person.getGnd() is not null) %}
    <tr>
        <td>GND</td>
        <td>{{ person.getGnd() }}</td>
    </tr>
    {% endif %}

    {% for personalName in person.getPersonalnames() %}
        {% for nameFragment in personalName.getNameFragments() %}
            <tr>
                <td>{{ nameFragment.getType|trans }}</td>
                <td>{{ nameFragment.getName }}</td>
            </tr>
        {% endfor %}
    {% endfor %}
  </tbody>
</table>

{% for role, relatedPublicationsPerRole in relatedPublications %}
    <h4>{{ role|trans }}</h4>
    {% for relatedPublication in relatedPublicationsPerRole %}
        {% set actionTarget = path('Data_genericCreateOrEdit', {'package': 'Data', 'className':relatedPublication.getSpecializationClassName(), 'recordId':relatedPublication.getId()}) %}
        {# show the publication type only if no volumeInformation (e.g "Band 1") is displayed #}
        {% set classNameCaption = relatedPublication.getSpecializationClassName()!='Volume'?'('~relatedPublication.getSpecializationClassName()|trans~')':'' %}
        <li><a href='{{ actionTarget }}'>{{ relatedPublication.getTitlePart('MAIN_TITLE') }} {{ classNameCaption }}</a></li>
    {% endfor %}
{% endfor %}
