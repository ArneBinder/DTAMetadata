{# This defines how to render the specific forms representing the model classes.
    For instance, that a title fragment is rendered on a single row is achieved 
    with the titlefragment_* blocks.
 #}

{% extends 'form_div_layout.html.twig' %}

{# --------------------- Form base customizations --------------------- #}

{% block form_row %}
    {% set inlineControls = inlineControls is defined ? inlineControls : false %}
    {#% set levelsWithoutLabel = levelsWithoutLabel is defined ? levelsWithoutLabel : 0 %#}
    
    {% if not inlined|default(false) %}
    <div class="control-group">
    {% endif %}
        
        {# Wrap label and controls in separate columns, unless inlineControls labels are requested #}
        {% if not inlineLabel|default(false) and not inlined|default(false) %}
            {# form_label automatically generates a label tag, with the correct id specified, the label class, added, etc. #}
            {{ form_label(form, null , {'label_attr':{'class':'control-label'} }) }}
            <div class="controls {{ inlineControls ? 'form-inline' }}">
        {% endif %}

        {% if inlineControls %}
            {%for child in form.children %}
                {{ form_row(child, {'inlined':true}) }}
            {% endfor %}
        {% else %}
            {% if not hideLabel|default(false) and (inlineLabel|default(false) or inlined|default(false))  %}
                {{ form_label(form) }} 
            {% endif %}
            {{ form_errors(form) }}
            {{ form_widget(form) }}
        {% endif %}            

        {% if not inlineLabel|default(false) and not inlined|default(false) %}
                </div>
        {% endif %}
    
    {% if not inlined|default(false) %}
    </div>
    {% endif %}
    
{% endblock form_row %}

{% block form_label %}
    {% if label != '@suppress' %}
        {{ parent() }}
    {% endif %}
{% endblock form_label %}

{% block checkbox_row %}
    <label class="checkbox">
        {{ form_widget(form) }}
        {{ label }}
    </label>
{% endblock checkbox_row %}

{# --------------------- Form Type Configurations, e.g. as made available by the above code --------------------- #}

{% block publication_row %}
    {{ form_row(form, {'inlineLabel':true, 'hideLabel': true}) }}
{% endblock %}
{% block work_row %}    
    {{ form_row(form, {'inlineLabel':true, 'hideLabel':true }) }}
{% endblock %}
{% block datespecification_row %}
    {{ form_row(form, {'inlineControls':true }) }}
{% endblock %}

{% block personpublication_row %}
    <div class="control-group form-inline">
            {{ form_widget(form.publicationroleId) }}
            {{ form_widget(form.person) }}
            <a onclick="$(this).parent().parent().remove();"><i class="icon-remove"></i></a>
    </div>
{% endblock %}

{# --------------------- Title --------------------- #}

{% block title_row %}
    {{ form_row(form, {'inlineLabel':false}) }}
{% endblock %}

{% block titlefragment_row %}
    <div class="control-group form-inline">
            <i class="icon-move"></i>
            {{ form_widget(form.titlefragmenttype)}}
            {{ form_widget(form.name,{'attr':{'class':'medium-text'} }) }} 
            <br/>
            {{ form_row(form.NameIsReconstructed ) }}
            {{ form_rest(form) }}
            <a onclick="$(this).parent().parent().remove();">
                <i class="icon-remove"></i> Entfernen
            </a>
    </div>
{% endblock %}

{# --------------------- Personal Name --------------------- #}

{% block person_row %}
    {{ form_row(form.personalNames, {'inlineLabel':false }) }}
    {{ form_row(form.gnd) }}
    {{ form_rest(form) }}
{% endblock %}

{% block personalname_row %}
    {{ form_row(form, {'inlineLabel':true, 'hideLabel':true }) }}
{% endblock %}

{% block namefragment_row %}
    <div class="control-group form-inline">
            {{ form_widget(form.namefragmenttype)}}
            {{ form_widget(form.name) }} 
            {{ form_rest(form) }}
            <a onclick="$(this).parent().parent().remove();"><i class="icon-remove"></i>Entfernen</a>
    </div>
{% endblock %}

{# --------------------- Title form types --------------------- #}
    
{#% block title_row %}
<fieldset>
    {{ form_row(form) }}
    {{ form_widget(form) }}
    {{ form_rest(form) }}
</fieldset>
{% endblock %#}

{#% block titlefragment_row %#}
    
 {#   <div class="control-group form-inline">
        <div class="controls">
            {{ form_widget(form.titlefragmenttype)}}
            {{ form_widget(form.name) }} 
            <label class="checkbox">
                {{ form_widget(form.NameIsReconstructed) }} 
                {{ form.NameIsReconstructed.vars.label }} 
            </label>
            {{form_rest(form)}}
        </div>
    </div>#}
{#% endblock %#}
